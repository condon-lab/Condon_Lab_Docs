<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://condon-lab.github.io/Condon_Lab_Docs/how_to_notes/HPC_systems/general_info/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>General info - Condon Research Group Docs</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "General info";
        var mkdocs_page_input_path = "how_to_notes/HPC_systems/general_info.md";
        var mkdocs_page_url = "/Condon_Lab_Docs/how_to_notes/HPC_systems/general_info/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Condon Research Group Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Condon Research Group Docs</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Admin</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../admin/pcard/">Pcard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../admin/travel/">Traveling on University Business</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Group meetings</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../group_meetings/">Group Meetings</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">How to notes</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../git_workflows/">Git Workflows</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >HPC systems</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../UA_HPC/">UA HPC Information</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cheyenne/">Running on Cheyenne (NCAR)</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">General info</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../parflow_install/">ParFlow Install</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../verde/">Verde</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Data and file transfers</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../data_and_file_transfers/apple_remote_desktop_ssh/">Remote Desktop / SSH / Basic Command line</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../data_and_file_transfers/cyverse/">General Cyverse Information</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../data_and_file_transfers/globus/">Globus File Transfer</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Useful external resources</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../useful_external_resources/example_scripts/">Group Example Scripts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../useful_external_resources/great_python_packages/">Great python packages</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../useful_external_resources/parflow_resources/">Parflow resources</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../useful_external_resources/research_repos/">Research repos</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Condon Research Group Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">How to notes</li>
          <li class="breadcrumb-item">HPC systems</li>
      <li class="breadcrumb-item active">General info</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="how-to-interact-with-hpc">How to interact with HPC</h2>
<p>Once you have an account you can ssh into a terminal instance as such (example for Cheyenne)</p>
<pre><code>Open your terminal and type the following:

1. ssh -Y -l “your_username”@cheyenne.ucar.edu (other HPCs would have a different address after the @)
    1. _Note:_ Macs often need the -Y and -l commands
    2. If it asks if you want to continue connecting, say yes
2. Enter your password and your 2FA token if necessary
    3. You probably already set up duo when you set up your account, look on NCARs website for Cheyenne or call the help desk
3. You’re logged in!
</code></pre>
<p>For writing code it is recommended to use the <img alt="remote explorer extension" src="https://code.visualstudio.com/docs/remote/ssh" /> in vscode. This will let you edit files on the machine via a vscode window on your machine. You can then run these files however your HPC requires.</p>
<h2 id="where-to-do-your-runs">Where to do your runs</h2>
<p>If possible, it is preferred to setup your runs in a folder owned by the group you belong to, not your personal scratch directory. This is to make collaboration and the eventuality of handing off your model easier. It WILL be harder than you think to move from your personal storage to the group folder if you want to make that change down the line.</p>
<p>Additionally, HPC systems often periodically wipe the data on them. It is advised to be familiar with what that policy is, and to run frequent backups using something like globus.</p>
<h2 id="large-file-transfers">Large file transfers</h2>
<p>The recommended tool for moving data in and out of NERSC for large transfers
<a href="http://www.globus.org/">http://www.globus.org/</a> or <a href="http://globus.nersc.gov/">http://globus.nersc.gov/</a>
See also the group notes on <a href="../../data_and_file_transfers/globus/">Globus</a></p>
<p>User scratch directory: <code>/global/cscratch1/sd/yourusername</code></p>
<p>Some HPCs do not have Globus available in which case you will need to determine what tool is best. I have found Globus to be the easiest option though when it is available (Ben West)</p>
<p>If you cannot use these tools SCP or potentially Icommands can be used. Icommands instructions will need to be googled, the ones in this doc are deprecated.</p>
<h2 id="conda">Conda</h2>
<p>It is recommended to use conda environments on HPC for both collaboration and to minimize the chance your build spontaneously breaks (no promises). You may have to check if your HPC requires a particular distribution or that you use a version it has already installed.</p>
<p><img alt="anaconda instructions" src="https://conda.io/projects/conda/en/latest/user-guide/getting-started.html" /></p>
<p>Look at Conda Environments: <code>conda env list</code></p>
<p>Create Conda Environments: <code>conda create --name -myenv</code></p>
<p>Activate Conda Environments: <code>conda activate</code> and <code>conda deactivate</code></p>
<p>Alternatively one may use venv or virtualenv for your environment needs.</p>
<h2 id="creating-and-monitoring-jobs">Creating and monitoring jobs</h2>
<p>HPCs track the compute hours people use out of a pre-allocated amount. This means any serious compute (running models or analyzing results) will need to be done via the submission of a job.</p>
<p>Most HPCs use a technology called slurm to manage any jobs (instances of compute you request). Below are some useful links, but also make sure to google "slurm + name of your hpc" because it may have minor differences between machines in terms of the settings available. </p>
<p><a href="https://docs.nersc.gov/jobs/#submitting-jobs">https://docs.nersc.gov/jobs/#submitting-jobs</a>
<a href="https://docs.nersc.gov/jobs/#monitoring-jobs">https://docs.nersc.gov/jobs/#monitoring-jobs</a></p>
<ul>
<li><code>sbatch</code>: submit a batch script</li>
<li><code>sacct</code>: display accounting data for jobs and job steps</li>
<li><code>salloc</code>: request nodes for an interactive batch session</li>
<li><code>srun</code>: launch parallel jobs</li>
<li><code>scancel</code>: delete a batch job</li>
<li><code>sqs</code>: NERSC custom queue display with job priority ranking info</li>
<li><code>squeue</code>: display info about jobs in the queue</li>
<li><code>sinfo</code>: view SLURM configuration about nodes and partitions</li>
<li><code>scontrol</code>: view and modify SLURM configuration and job state</li>
</ul>
<p>Some HPCs we use use something called PBS instead. See</p>
<p><a href="https://emleddin.github.io/comp-chem-website/UNIXguide-PBS.html">Tutorial</a></p>
<p><a href="https://www.scribd.com/document/359446973/PBS-Queue-Commands">Scribd article (with annoying ads but useful free content)</a></p>
<p>and for an example job submission script:</p>
<pre><code class="language-bash"># Your job will use 1 node, 8 cores, and 48gb of memory total.

#PBS -q standard

#PBS -l select=1:ncpus=16:mem=48gb:pcmem=6gb

### Specify a name for the job

#PBS -N test

### Specify the group name

#PBS -W group_list=lecondon

### Walltime is how long your job will run

#PBS -l walltime=00:50:00

### Joins standard error and standard out

#PBS -j oe
</code></pre>
<p>cd /home/u18/lecondon/Test/washita/tcl_scripts</p>
<p>tclsh Dist_Forcings.tcl</p>
<p>tclsh LW_Test.tcl</p>
<h2 id="debug-queue">Debug queue</h2>
<p>The debug queue is a high-priority queue with a short runtime that is used to debug your runs before sending them to the standard or other queue. More information can be found <a href="https://docs.hpc.arizona.edu/display/UAHPC/Allocation+and+Limits">here</a> for UA HPC. All HPCs should have a debug queue available.</p>
<h2 id="we-recommend-you-use-the-parflow-blog-if-you-can-instead-of-this-page">We recommend you use the parflow blog if you can instead of this page</h2>
<p><a href="http://parflow.blogspot.com/">The Parflow blog</a> has install instructions for many systems. This is the recommended path for now as it is updated most often.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../cheyenne/" class="btn btn-neutral float-left" title="Running on Cheyenne (NCAR)"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../parflow_install/" class="btn btn-neutral float-right" title="ParFlow Install">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../cheyenne/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../parflow_install/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
